Сеть **ZigBee** - самоорганизующаяся, и ее работа начинается с формирования. До момента формирования сети каждому устройству должен быть сопоставлен его тип (координатор, маршрутизатор, конечное устройство), а также должна быть определена выходная мощность приемо-передатчика.

Формирует сеть координатор. В каждой локальной сети **ZigBee** имеется только одно такое устройство. Координатор определяет номер канала (диапазон 11-26), свободный от помех, на котором сеть будет организована, и ожидает запросы на подключение. Также координатор автоматически генерирует два идентификатора сети: длинный идентификатор (*Extended ID*) и короткий (*Short ID*). 

*Short ID* (адрес сети в канале, *Personal area network ID, PAN ID*) используется для разделения сообщений одной сети от другой, т.к. на одном канале может быть организовано несколько сетей.

*Extended ID* (уникальный 64-разрядный идентификатор сети, расширенный PAN ID) используется при подключении устройств к сети, или если координатор решил сменить канал из-за его плохого качества. При смене канала, все уже подключенные устройства сети будут переподключаться к сети, используя *Extended ID*.

В момент формирования сети координатор является единственным устройством, поэтому отвечает на запрос и предоставляет присоединение только он. В дальнейшем, присоединение также смогут предоставлять маршрутизаторы сети. Устройства, пытающиеся присоединиться к сети, рассылают широковещательный запрос и, получив ответ от присоединяющего устройства, обмениваются сообщениями. Возможность присоединения определяется способностью присоединяющего устройства обслужить новые устройства в дополнение к ранее подключенным.

Каждое устройство сети **ZigBee** имеет свой адрес:
- 64-битный идентификатор, который прошит в микросхему на заводе изготовителе и не может быть изменен;
- 16-битный идентификатор, который выделен устройству координатором при подключении к сети.

Сетевой 16-битный адрес координатора всегда равен 0х0000.

Связь в сети осуществляется путем последовательной ретрансляции пакетов от узла источника до узла адресата. Стандарт предусматривает несколько альтернативных алгоритмов маршрутизации, выбор которых происходит автоматически. Предпочтение отдается оптимальному маршруту.

Конечные устройства **ZigBee** отличаются низким электропотреблением, для них предусмотрен режим "сна". Т.е. между этими устройствами не осуществляется постоянный обмен данными, и они находятся в спящем режими, кроме тих ситуаций, когда необходимо отправить или принять пакет данных. Задержка передачи составляет десятки миллисекунд. Такое энергосбережение позволяет устройствам работать до трех лет от одной обычной батарейки АА или даже ААА.

Маршрутизаторы сети все время "слушают" своих соседе, обмениваются маршрутной информацией, и при выходе из строя одного из узлов, или его физического удаления, сеть автоматически вычисляет новый маршрут и перенаправляет данные.

Координатор и маршрутизаторы работают в непрерывном режиме, поэтому имеют стационарное питание от сети. Каждый маршрутизато может обслуживать 32 конечных узла.

Для связи между узлами сети с внешними сетями стандарт **ZigBee** использует протоколы **MQTT**(*MessageQueueTelemetryTransport*) и **XMPP**(*ExtensibleMessagingandPresenceProtocol*).