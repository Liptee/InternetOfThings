![[Pasted image 20220521170444.png]]
Обмен сообщениями в протоколе MQTT осуществляется между клиентом (*Client*), который может быть издателем или подписчиком (*Publisher/Subscriber*) сообщений, и брокером (*Broker*) сообщений.

В сети на базе протокола MQTT различают три объекта:
- **Publisher** - MQTT-клиент, который при возникновении определенного события передает брокеру информацию о нем, публикую соответствующие темы (*Topic*);
- **Broker** - MQTT-сервер, который принимает информацию от издателей и передает ее соответсвующим подписчикам, в сложным системах может выполнят также различные операции, связанные с анализом и обработкой поступивших данных. Разные брокеры могут соединяться между собой, если они подписываются на сообщения друг друга;
- **Subscriber** - MQTT-клиент, который после подписки к брокеру большую часть времени "слушает" его и постоянно готов к приему и обработке входящего сообщения на интересующие темы от брокера.

Отличительной особенностью принципа **Pub-Sub** от клиент-серверного подхода является то, что клиенты, посылающие сообщения и клиенты, принимающие сообщения, как правило, разделены. Это разделение может быть организовано в трех плоскостях:
- пространство - издатель и подписчик не обязаны знать друг друга;
- время - издатель и подписчик не должны быть включены в одно и то же время;
- синхронизация - операции на обеих сторонах не должны приостанавливаться в течение публикации или получения информации.

Издатель и подписчик не передают друг другу сообщения напрямую, не устанавливают прямой контакт, могут не знать о существовании друг друга. Координирует и управляет передачей сообщений от издателя к подписчику и от подписчика к издателю брокер. Распараллеливание операций на брокере является второй важной особенностью принципа взаимодействия **Pub-Sub**.

Упрощенный процесс обмена информацией можно описать следующим образом. В сети на базе протокола MQTT может быть некоторое количество издателей, публикующих информацию на разные темы. Каждый издатель при возникновении определенного события передает брокеру информацию о нем, публикуя соответствующую тему. Брокер анализирует, какие из подписчиков имеют подписку на данные темы. Множество подписчиков может быть подписано на разнообразные темы в зависимости от этих подписок получать необходимую им информацию, не общаяся с издателем напрямую.